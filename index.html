<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Musaddik's Portfolio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="favicon.png" type="image/x-icon">

    <!-- Firebase v9 Modular SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
        import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCOlajbGgGjjS2nvd1jhzqOn4aSr_p5KEY",
            authDomain: "visit-counter-69546.firebaseapp.com",
            databaseURL: "https://visit-counter-69546-default-rtdb.firebaseio.com",
            projectId: "visit-counter-69546",
            storageBucket: "visit-counter-69546.firebasestorage.app",
            messagingSenderId: "847385111457",
            appId: "1:847385111457:web:8fea91516f12f80ad979e0",
            measurementId: "G-L25R9DHP03"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const visitsRef = ref(database, 'visitCount');

        // Check if user has visited before in the same session using sessionStorage
        if (!sessionStorage.getItem('hasVisited')) {
            // First-time visit: Increment the count
            get(visitsRef).then((snapshot) => {
                let visitCount = snapshot.val() || 0; // Current count from Firebase (or 0 if not set)
                visitCount++; // Increment visit count
                set(visitsRef, visitCount); // Update visit count in Firebase
                document.getElementById('visit-counter').textContent = visitCount; // Display the updated count
            }).catch((error) => {
                console.error("Error updating visit count:", error);
                document.getElementById('visit-counter').textContent = "Unable to load counter.";
            });

            // Mark the user as having visited in this session using sessionStorage
            sessionStorage.setItem('hasVisited', 'true');
        } else {
            // If the user has visited before in the current session, just show the current count without incrementing
            get(visitsRef).then((snapshot) => {
                const visitCount = snapshot.val() || 0; // Display current count from Firebase
                document.getElementById('visit-counter').textContent = visitCount;
            }).catch((error) => {
                console.error("Error loading visit count:", error);
                document.getElementById('visit-counter').textContent = "Unable to load counter.";
            });
        }
    </script>
</head>

<body style="background-color: black; color: white;">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">Musaddik</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="work.html">Work</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                    <li class="nav-item"><a class="nav-link btn btn-outline-info" href="contact.html">Get in Touch</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Profile Image Section -->
    <div class="container text-center my-5">
        <img src="photo.jpg" alt="Musaddik Maulavi" class="rounded-circle" style="width: 170px; height: 170px;">
    </div>

    <!-- Hero Section -->
    <section class="hero d-flex align-items-center">
        <div class="container text-center text-light mb-5">
            <h1>Hello, I am Musaddik.</h1>
            <p class="lead">I am a data scientist with a strong foundation in software engineering and financial data analysis, skilled in Python and SQL. I specialize in analyzing large datasets to drive informed decisions, with experience in backend improvements, data visualization, and applying statistical methods to projects like price prediction and fraud detection.</p>
            <a href="experience.html" class="btn btn-light mb-5">Read About My Experience</a>
        </div>
    </section>

     <!-- Counter Section -->
     <div class="container text-center my-5">
        <p class="lead">This website has been visited:</p>
        <h2 id="visit-counter" style="color: lightgreen;">Loading...</h2>
        <p class="text-muted">times globally.</p>
    </div>

    <!-- Footer -->
    <footer class="text-center text-light py-4" style="background-color: #000;">
        &copy; 2024 Musaddik Maulavi
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>
